
> polideportivo-platform@ dev C:\Users\Admin\Desktop\polideportivo oroquieta\polideportivo-platform
> turbo run dev

ÔÇó Packages in scope: @repo/auth, @repo/credit-system, @repo/db, @repo/eslint-config, @repo/notifications, @repo/payments, @repo/typescript-config, @repo/ui, admin, api, docs, web
ÔÇó Running dev in 12 packages
ÔÇó Remote caching disabled
api:dev: cache bypass, force executing e381a59ffe4bbe0b
@repo/credit-system:dev: cache bypass, force executing bae72f2e78a0f3c8
admin:dev: cache bypass, force executing 9e8d2673e60e13c4
docs:dev: cache bypass, force executing 068005ea95733c5a
web:dev: cache bypass, force executing f1e6c1d6094d81d1
admin:dev: 
admin:dev: > admin@0.1.0 dev C:\Users\Admin\Desktop\polideportivo oroquieta\polideportivo-platform\apps\admin
admin:dev: > next dev --port 3001
admin:dev: 
api:dev: 
api:dev: > api@0.1.0 dev C:\Users\Admin\Desktop\polideportivo oroquieta\polideportivo-platform\apps\api
api:dev: > next dev --port 3002
api:dev: 
docs:dev: 
docs:dev: > docs@0.1.0 dev C:\Users\Admin\Desktop\polideportivo oroquieta\polideportivo-platform\apps\docs
docs:dev: > next dev --turbopack --port 3004
docs:dev: 
web:dev: 
web:dev: > web@0.1.0 dev C:\Users\Admin\Desktop\polideportivo oroquieta\polideportivo-platform\apps\web
web:dev: > next dev
web:dev: 
@repo/credit-system:dev: 
@repo/credit-system:dev: > @repo/credit-system@1.0.0 dev C:\Users\Admin\Desktop\polideportivo oroquieta\polideportivo-platform\packages\credit-system
@repo/credit-system:dev: > tsc --watch
@repo/credit-system:dev: 
@repo/credit-system:dev: [2J[3J[H11:09:57 p.┬ám. - Starting compilation in watch mode...
@repo/credit-system:dev: 
admin:dev:    Ôû▓ Next.js 15.4.7
admin:dev:    - Local:        http://localhost:3001
admin:dev:    - Network:      http://192.168.178.12:3001
admin:dev:    - Environments: .env.local
admin:dev:    - Experiments (use with caution):
admin:dev:      ┬À largePageDataBytes: 12800000
admin:dev: 
admin:dev:  Ô£ô Starting...
web:dev:    Ôû▓ Next.js 15.4.7
web:dev:    - Local:        http://localhost:3000
web:dev:    - Network:      http://192.168.178.12:3000
web:dev:    - Environments: .env.local
web:dev:    - Experiments (use with caution):
web:dev:      Ô£ô optimizeCss
web:dev:      ┬À optimizePackageImports
web:dev: 
web:dev:  Ô£ô Starting...
api:dev:    Ôû▓ Next.js 15.4.7
api:dev:    - Local:        http://localhost:3002
api:dev:    - Network:      http://192.168.178.12:3002
api:dev:    - Environments: .env.local
api:dev: 
api:dev:  Ô£ô Starting...
web:dev: ­ƒÜÇ [NEXT-CONFIG] === POLIDEPORTIVO REWRITES CONFIGURATION ===
web:dev: ­ƒöº [NEXT-CONFIG] Backend API URL: http://localhost:3002
web:dev: ­ƒöº [NEXT-CONFIG] Environment: development
web:dev: ­ƒöº [NEXT-CONFIG] Timestamp: 2025-11-21T22:09:58.112Z
web:dev: ­ƒöº [NEXT-CONFIG] Strategy: beforeFiles + negative regex
docs:dev:    Ôû▓ Next.js 15.4.7 (Turbopack)
docs:dev:    - Local:        http://localhost:3004
docs:dev:    - Network:      http://192.168.178.12:3004
docs:dev: 
docs:dev:  Ô£ô Starting...
docs:dev:  Ô£ô Ready in 1331ms
web:dev:  Ô£ô Ready in 2.1s
@repo/credit-system:dev: 
@repo/credit-system:dev: 11:10:00 p.┬ám. - Found 0 errors. Watching for file changes.
admin:dev:  Ô£ô Ready in 2.2s
api:dev:  Ô£ô Ready in 2.4s
admin:dev: (node:3772) [DEP0060] DeprecationWarning: The `util._extend` API is deprecated. Please use Object.assign() instead.
admin:dev: (Use `node --trace-deprecation ...` to show where the warning was created)
api:dev:  Ô£ô Compiled /middleware in 421ms (233 modules)
api:dev:  Ôùï Compiling /api/admin/payments ...
api:dev:  Ô£ô Compiled /api/admin/payments in 3.5s (1703 modules)
api:dev: [dotenv@17.2.1] injecting env (0) from .env.local -- tip: ÔÜÖ´©Å  load multiple .env files with { path: ['.env.local', '.env'] }
api:dev: --- DEBUGGING DATABASE_URL (FIXED) ---
api:dev: DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres?sslmode=require
api:dev: DIRECT_DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres
api:dev: --- FIN DEBUGGING ---
api:dev: Ô£à [DB] Usando DIRECT_DATABASE_URL para desarrollo
api:dev: ­ƒöù [DB] URL final que se usar├í: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres...
api:dev: ­ƒöù [DB] ┬┐Es Data Proxy?: false
api:dev: ­ƒöù [DB] Longitud de URL: 88
api:dev: ­ƒöù [DB] Primeros 20 caracteres: postgresql://postgre...
api:dev: [Notifications][SMS] Twilio deshabilitado: variables de entorno no v├ílidas o ausentes.
api:dev: [2025-11-21T22:10:44.760Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ÔÜá´©Å [REDSYS-CONFIG] No se encontr├│ clave configurada, usando clave gen├®rica de test
api:dev: Ô£à [REDSYS-CONFIG] Clave inicializada correctamente: { keyLength: 24, testMode: true, keySource: 'GENERIC_TEST' }
api:dev: [2025-11-21T22:10:44.853Z] GET /api/admin/reservations - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:10:44.912Z] GET /api/admin/users - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:10:44.929Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:10:44.944Z] GET /api/admin/payments - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:10:44.957Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 74ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8 - 75ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8 - 70ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 72ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 65ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 72ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 71ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15 - 70ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 72ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 35ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query BEGIN
api:dev: [DB-QUERY] BEGIN - 35ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 30ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:10:45.716Z] GET /api/admin/audit - 200 (787ms)
api:dev:  GET /api/admin/audit?severity=HIGH&status=ERROR&limit=100 200 in 5154ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100","timestamp":"2025-11-21T22:10:45.726Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/reservations/new',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 797,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4 - 73ms
api:dev: [2025-11-21T22:10:45.767Z] GET /api/admin/payments - 200 (823ms)
api:dev:  GET /api/admin/payments?status=PENDING&limit=100 200 in 5199ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 76ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 71ms
api:dev: prisma:query UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus")))
api:dev: [DB-QUERY] UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus"))) - 75ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2 - 103ms
api:dev: prisma:query COMMIT
api:dev: [DB-QUERY] COMMIT - 30ms
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 71ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3 - 68ms
api:dev: Admin reservations request params: { status: 'PENDING', limit: '100' }
api:dev: Admin reservations query where: {
api:dev:   "status": "PENDING"
api:dev: }
api:dev: Admin reservations query params: { skip: 0, limit: 100, sortBy: 'createdAt', sortOrder: 'desc' }
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub" - 68ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 106ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub" - 69ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4 - 73ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3 - 75ms
api:dev: prisma:query SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102
api:dev: [DB-QUERY] SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102 - 70ms
api:dev: prisma:query SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104
api:dev: [DB-QUERY] SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104 - 77ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 65ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3 - 62ms
api:dev: prisma:query SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 72ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 65ms
api:dev: [2025-11-21T22:10:46.221Z] GET /api/admin/users - 200 (1309ms)
api:dev:  GET /api/admin/users?limit=100 200 in 5654ms
api:dev: [2025-11-21T22:10:46.227Z] GET /api/maintenance - 200 (1270ms)
api:dev:  GET /api/maintenance?status=SCHEDULED&limit=100 200 in 5662ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2) OFFSET $3 - 62ms
api:dev:  Ôùï Compiling /api/notifications ...
api:dev: prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2 - 66ms
api:dev: [2025-11-21T22:10:46.268Z] GET /api/admin/orders - 200 (1509ms)
api:dev:  GET /api/admin/orders?status=PENDING&limit=100 200 in 5700ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 67ms
api:dev: Admin reservations query results: { itemsCount: 4, total: 4 }
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 60ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 63ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3 - 100ms
api:dev: [2025-11-21T22:10:46.813Z] GET /api/admin/reservations - 200 (1960ms)
api:dev:  GET /api/admin/reservations?status=PENDING&limit=100 200 in 6245ms
api:dev:  Ô£ô Compiled /api/notifications in 1265ms (1706 modules)
api:dev: [dotenv@17.2.1] injecting env (0) from .env.local -- tip: ­ƒôí observe env with Radar: https://dotenvx.com/radar
api:dev: --- DEBUGGING DATABASE_URL (FIXED) ---
api:dev: DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres?sslmode=require
api:dev: DIRECT_DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres
api:dev: --- FIN DEBUGGING ---
api:dev: [Notifications][SMS] Twilio deshabilitado: variables de entorno no v├ílidas o ausentes.
api:dev: [2025-11-21T22:10:47.733Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:10:47.747Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:10:47.767Z] GET /api/notifications - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/notifications
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:10:47.778Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 68ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 68ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 69ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [NOTIFICATIONS] Usuario autenticado: {
api:dev:   id: 'cmepxp3z30000v9fwsubv4aaj',
api:dev:   role: 'ADMIN',
api:dev:   email: 'admin@polideportivo.com',
api:dev:   isUuid: false
api:dev: }
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:10:47.900Z] GET /api/admin/audit - 200 (153ms)
api:dev:  GET /api/admin/audit?severity=CRITICAL&status=FAILED&limit=100 200 in 2111ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100","timestamp":"2025-11-21T22:10:47.903Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/reservations/new',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 156,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 68ms
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 74ms
api:dev: [2025-11-21T22:10:47.933Z] GET /api/admin/orders - 200 (200ms)
api:dev:  GET /api/admin/orders?status=PAID&limit=100 200 in 1454ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12 - 75ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 60ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 67ms
api:dev: [2025-11-21T22:10:47.975Z] GET /api/maintenance - 200 (197ms)
api:dev:  GET /api/maintenance?status=IN_PROGRESS&limit=100 200 in 1497ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 62ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 28ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 40ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 39ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 40ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub" - 62ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2 - 68ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8 - 67ms
api:dev: [2025-11-21T22:10:49.903Z] GET /api/notifications - 200 (2136ms)
api:dev:  GET /api/notifications?limit=10 200 in 4158ms
api:dev: [2025-11-21T22:11:40.004Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:11:40.054Z] GET /api/admin/payments - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ÔÜá´©Å [REDSYS-CONFIG] No se encontr├│ clave configurada, usando clave gen├®rica de test
api:dev: Ô£à [REDSYS-CONFIG] Clave inicializada correctamente: { keyLength: 24, testMode: true, keySource: 'GENERIC_TEST' }
api:dev: [2025-11-21T22:11:40.118Z] GET /api/admin/reservations - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:11:40.175Z] GET /api/admin/users - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:11:40.179Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:11:40.186Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 37ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 35ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 31ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 41ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 41ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 42ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 42ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 38ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 37ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 37ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 28ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 28ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:11:40.312Z] GET /api/admin/audit - 200 (133ms)
api:dev:  GET /api/admin/audit?severity=HIGH&status=ERROR&limit=100 200 in 338ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100","timestamp":"2025-11-21T22:11:40.314Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/reservations/new',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 135,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4 - 69ms
api:dev: [2025-11-21T22:11:40.338Z] GET /api/admin/payments - 200 (284ms)
api:dev:  GET /api/admin/payments?status=PENDING&limit=100 200 in 366ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 32ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: [2025-11-21T22:11:40.345Z] GET /api/notifications - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/notifications
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 67ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 90ms
api:dev: [2025-11-21T22:11:40.373Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 64ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8 - 72ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [NOTIFICATIONS] Usuario autenticado: {
api:dev:   id: 'cmepxp3z30000v9fwsubv4aaj',
api:dev:   role: 'ADMIN',
api:dev:   email: 'admin@polideportivo.com',
api:dev:   isUuid: false
api:dev: }
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 67ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub" - 69ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 35ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 66ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2 - 104ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8 - 72ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:11:40.449Z] GET /api/admin/audit - 200 (76ms)
api:dev:  GET /api/admin/audit?severity=CRITICAL&status=FAILED&limit=100 200 in 96ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100","timestamp":"2025-11-21T22:11:40.452Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/reservations/new',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 79,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12 - 68ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 38ms
api:dev: [2025-11-21T22:11:40.476Z] GET /api/maintenance - 200 (472ms)
api:dev:  GET /api/maintenance?status=SCHEDULED&limit=100 200 in 519ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4 - 78ms
api:dev: prisma:query SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104
api:dev: [DB-QUERY] SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104 - 37ms
api:dev: [2025-11-21T22:11:40.503Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102
api:dev: [DB-QUERY] SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102 - 66ms
api:dev: [2025-11-21T22:11:40.521Z] GET /api/admin/users - 200 (346ms)
api:dev:  GET /api/admin/users?limit=100 200 in 549ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15 - 75ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 79ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query BEGIN
api:dev: [DB-QUERY] BEGIN - 35ms
api:dev: prisma:query SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 74ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus")))
api:dev: [DB-QUERY] UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus"))) - 70ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2 - 76ms
api:dev: [2025-11-21T22:11:40.639Z] GET /api/admin/orders - 200 (453ms)
api:dev:  GET /api/admin/orders?status=PENDING&limit=100 200 in 667ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 68ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 76ms
api:dev: [2025-11-21T22:11:40.652Z] GET /api/maintenance - 200 (149ms)
api:dev:  GET /api/maintenance?status=IN_PROGRESS&limit=100 200 in 163ms
api:dev: [2025-11-21T22:11:40.666Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query COMMIT
api:dev: [DB-QUERY] COMMIT - 31ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 69ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3 - 66ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: Admin reservations request params: { status: 'PENDING', limit: '100' }
api:dev: Admin reservations query where: {
api:dev:   "status": "PENDING"
api:dev: }
api:dev: Admin reservations query params: { skip: 0, limit: 100, sortBy: 'createdAt', sortOrder: 'desc' }
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 69ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3 - 68ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub" - 68ms
api:dev: [2025-11-21T22:11:40.804Z] GET /api/admin/orders - 200 (138ms)
api:dev:  GET /api/admin/orders?status=PAID&limit=100 200 in 154ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3 - 78ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 28ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2) OFFSET $3 - 67ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 70ms
api:dev: Admin reservations query results: { itemsCount: 4, total: 4 }
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 63ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 68ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3 - 95ms
api:dev: [2025-11-21T22:11:41.254Z] GET /api/admin/reservations - 200 (1136ms)
api:dev:  GET /api/admin/reservations?status=PENDING&limit=100 200 in 1283ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 39ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 41ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 39ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 39ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub" - 70ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2 - 70ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8 - 67ms
api:dev: [2025-11-21T22:11:42.426Z] GET /api/notifications - 200 (2081ms)
api:dev:  GET /api/notifications?limit=10 200 in 2101ms
api:dev: [2025-11-21T22:12:40.027Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:12:40.055Z] GET /api/admin/reservations - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:12:40.061Z] GET /api/admin/payments - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 36ms
api:dev: [2025-11-21T22:12:40.111Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:12:40.118Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:12:40.126Z] GET /api/admin/users - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 31ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 32ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 30ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 39ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 39ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 40ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:12:40.199Z] GET /api/admin/audit - 200 (88ms)
api:dev:  GET /api/admin/audit?severity=HIGH&status=ERROR&limit=100 200 in 224ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100","timestamp":"2025-11-21T22:12:40.200Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/reservations/new',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 89,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 35ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 38ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: [2025-11-21T22:12:40.238Z] GET /api/notifications - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/notifications
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8 - 33ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 29ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 65ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 38ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 71ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8 - 34ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 40ms
api:dev: prisma:query SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4 - 67ms
api:dev: [2025-11-21T22:12:40.290Z] GET /api/admin/payments - 200 (229ms)
api:dev:  GET /api/admin/payments?status=PENDING&limit=100 200 in 322ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 60ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 38ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub" - 67ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [NOTIFICATIONS] Usuario autenticado: {
api:dev:   id: 'cmepxp3z30000v9fwsubv4aaj',
api:dev:   role: 'ADMIN',
api:dev:   email: 'admin@polideportivo.com',
api:dev:   isUuid: false
api:dev: }
api:dev: [2025-11-21T22:12:40.324Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 77ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 30ms
api:dev: [2025-11-21T22:12:40.347Z] GET /api/maintenance - 200 (320ms)
api:dev:  GET /api/maintenance?status=SCHEDULED&limit=100 200 in 387ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15 - 68ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:12:40.383Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12 - 65ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2 - 103ms
api:dev: prisma:query BEGIN
api:dev: [DB-QUERY] BEGIN - 40ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4 - 64ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:12:40.410Z] GET /api/admin/audit - 200 (86ms)
api:dev:  GET /api/admin/audit?severity=CRITICAL&status=FAILED&limit=100 200 in 105ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100","timestamp":"2025-11-21T22:12:40.412Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/reservations/new',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 87,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 38ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102
api:dev: [DB-QUERY] SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102 - 66ms
api:dev: prisma:query SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104
api:dev: [DB-QUERY] SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104 - 72ms
api:dev: [2025-11-21T22:12:40.469Z] GET /api/admin/users - 200 (343ms)
api:dev:  GET /api/admin/users?limit=100 200 in 493ms
api:dev: prisma:query UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus")))
api:dev: [DB-QUERY] UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus"))) - 70ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 41ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 68ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query COMMIT
api:dev: [DB-QUERY] COMMIT - 32ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 34ms
api:dev: [2025-11-21T22:12:40.507Z] GET /api/maintenance - 200 (124ms)
api:dev:  GET /api/maintenance?status=IN_PROGRESS&limit=100 200 in 145ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2 - 65ms
api:dev: [2025-11-21T22:12:40.539Z] GET /api/admin/orders - 200 (421ms)
api:dev:  GET /api/admin/orders?status=PENDING&limit=100 200 in 564ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: [2025-11-21T22:12:40.570Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3 - 67ms
api:dev: Admin reservations request params: { status: 'PENDING', limit: '100' }
api:dev: Admin reservations query where: {
api:dev:   "status": "PENDING"
api:dev: }
api:dev: Admin reservations query params: { skip: 0, limit: 100, sortBy: 'createdAt', sortOrder: 'desc' }
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub" - 31ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3 - 60ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3 - 63ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 40ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 64ms
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 72ms
api:dev: [2025-11-21T22:12:40.717Z] GET /api/admin/orders - 200 (147ms)
api:dev:  GET /api/admin/orders?status=PAID&limit=100 200 in 164ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2) OFFSET $3 - 64ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 67ms
api:dev: Admin reservations query results: { itemsCount: 4, total: 4 }
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 67ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 64ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3 - 88ms
api:dev: [2025-11-21T22:12:41.056Z] GET /api/admin/reservations - 200 (1001ms)
api:dev:  GET /api/admin/reservations?status=PENDING&limit=100 200 in 1088ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 28ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 41ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2 - 40ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub" - 71ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8 - 34ms
api:dev: [2025-11-21T22:12:42.221Z] GET /api/notifications - 200 (1983ms)
api:dev:  GET /api/notifications?limit=10 200 in 2007ms
api:dev: [2025-11-21T22:13:39.978Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:13:39.998Z] GET /api/admin/reservations - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:13:40.015Z] GET /api/admin/payments - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:13:40.018Z] GET /api/admin/users - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:13:40.022Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:13:40.026Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 33ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 34ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 35ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 33ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 34ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 34ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 44ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 35ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 43ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 23ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 35ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:13:40.139Z] GET /api/admin/audit - 200 (117ms)
api:dev:  GET /api/admin/audit?severity=HIGH&status=ERROR&limit=100 200 in 186ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100","timestamp":"2025-11-21T22:13:40.140Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/reservations/new',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 118,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: [2025-11-21T22:13:40.163Z] GET /api/notifications - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/notifications
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 73ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 36ms
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8 - 73ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 36ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2 - 66ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 99ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 78ms
api:dev: prisma:query SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4 - 78ms
api:dev: [2025-11-21T22:13:40.226Z] GET /api/admin/payments - 200 (211ms)
api:dev:  GET /api/admin/payments?status=PENDING&limit=100 200 in 274ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 40ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [NOTIFICATIONS] Usuario autenticado: {
api:dev:   id: 'cmepxp3z30000v9fwsubv4aaj',
api:dev:   role: 'ADMIN',
api:dev:   email: 'admin@polideportivo.com',
api:dev:   isUuid: false
api:dev: }
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub" - 72ms
api:dev: [2025-11-21T22:13:40.251Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4 - 72ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8 - 71ms
api:dev: prisma:query SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104
api:dev: [DB-QUERY] SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104 - 38ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 69ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12 - 67ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 67ms
api:dev: prisma:query SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102
api:dev: [DB-QUERY] SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102 - 73ms
api:dev: [2025-11-21T22:13:40.323Z] GET /api/admin/users - 200 (305ms)
api:dev:  GET /api/admin/users?limit=100 200 in 371ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:13:40.324Z] GET /api/admin/audit - 200 (73ms)
api:dev:  GET /api/admin/audit?severity=CRITICAL&status=FAILED&limit=100 200 in 89ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100","timestamp":"2025-11-21T22:13:40.325Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/reservations/new',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 74,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15 - 79ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 66ms
api:dev: [2025-11-21T22:13:40.358Z] GET /api/maintenance - 200 (380ms)
api:dev:  GET /api/maintenance?status=SCHEDULED&limit=100 200 in 419ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 61ms
api:dev: prisma:query BEGIN
api:dev: [DB-QUERY] BEGIN - 36ms
api:dev: [2025-11-21T22:13:40.381Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2 - 68ms
api:dev: [2025-11-21T22:13:40.391Z] GET /api/admin/orders - 200 (365ms)
api:dev:  GET /api/admin/orders?status=PENDING&limit=100 200 in 439ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: [2025-11-21T22:13:40.415Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus")))
api:dev: [DB-QUERY] UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus"))) - 62ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query COMMIT
api:dev: [DB-QUERY] COMMIT - 41ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 40ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 67ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 67ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: Admin reservations request params: { status: 'PENDING', limit: '100' }
api:dev: Admin reservations query where: {
api:dev:   "status": "PENDING"
api:dev: }
api:dev: Admin reservations query params: { skip: 0, limit: 100, sortBy: 'createdAt', sortOrder: 'desc' }
api:dev: [2025-11-21T22:13:40.521Z] GET /api/maintenance - 200 (140ms)
api:dev:  GET /api/maintenance?status=IN_PROGRESS&limit=100 200 in 153ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 63ms
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 63ms
api:dev: [2025-11-21T22:13:40.551Z] GET /api/admin/orders - 200 (136ms)
api:dev:  GET /api/admin/orders?status=PAID&limit=100 200 in 150ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub" - 64ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3 - 71ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 74ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3 - 64ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2) OFFSET $3 - 67ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 64ms
api:dev: Admin reservations query results: { itemsCount: 4, total: 4 }
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 70ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 64ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3 - 99ms
api:dev: [2025-11-21T22:13:41.029Z] GET /api/admin/reservations - 200 (1031ms)
api:dev:  GET /api/admin/reservations?status=PENDING&limit=100 200 in 1089ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 40ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 42ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub" - 57ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2 - 72ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8 - 64ms
api:dev: [2025-11-21T22:13:42.271Z] GET /api/notifications - 200 (2108ms)
api:dev:  GET /api/notifications?limit=10 200 in 2121ms
api:dev: [2025-11-21T22:14:39.989Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 81ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 64ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 76ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 89ms
api:dev:  Ôùï Compiling /api/auth/token ...
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 96ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 48ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 37ms
api:dev: [2025-11-21T22:14:40.594Z] GET /api/maintenance - 200 (605ms)
api:dev:  GET /api/maintenance?status=SCHEDULED&limit=100 200 in 639ms
api:dev:  Ô£ô Compiled /api/auth/token in 1307ms (1711 modules)
api:dev: [dotenv@17.2.1] injecting env (0) from .env.local -- tip: ÔÜÖ´©Å  override existing env vars with { override: true }
api:dev: --- DEBUGGING DATABASE_URL (FIXED) ---
api:dev: DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres?sslmode=require
api:dev: DIRECT_DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres
api:dev: --- FIN DEBUGGING ---
api:dev: [Notifications][SMS] Twilio deshabilitado: variables de entorno no v├ílidas o ausentes.
api:dev: ÔÜá´©Å [REDSYS-CONFIG] No se encontr├│ clave configurada, usando clave gen├®rica de test
api:dev: Ô£à [REDSYS-CONFIG] Clave inicializada correctamente: { keyLength: 24, testMode: true, keySource: 'GENERIC_TEST' }
api:dev: [2025-11-21T22:14:42.150Z] GET /api/admin/users - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:14:42.152Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:14:42.152Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:14:42.153Z] GET /api/admin/payments - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:14:42.153Z] GET /api/admin/reservations - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:14:42.191Z] GET /api/notifications - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/notifications
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 39ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: Ô£à [FIREBASE-ADMIN] Inicializado correctamente
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 74ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 81ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 81ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 39ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 79ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 61ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 58ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 64ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 56ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [NOTIFICATIONS] Usuario autenticado: {
api:dev:   id: 'cmepxp3z30000v9fwsubv4aaj',
api:dev:   role: 'ADMIN',
api:dev:   email: 'admin@polideportivo.com',
api:dev:   isUuid: false
api:dev: }
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:14:42.487Z] GET /api/admin/audit - 200 (335ms)
api:dev:  GET /api/admin/audit?severity=HIGH&status=ERROR&limit=100 200 in 2531ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100","timestamp":"2025-11-21T22:14:42.490Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/reservations/new',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 338,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub" - 42ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 43ms
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 50ms
api:dev: [2025-11-21T22:14:42.535Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 78ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 79ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4 - 41ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12 - 92ms
api:dev: prisma:query SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 37ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 37ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 63ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 62ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 57ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2 - 166ms
api:dev: prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2 - 39ms
api:dev: [2025-11-21T22:14:42.616Z] GET /api/admin/orders - 200 (464ms)
api:dev:  GET /api/admin/orders?status=PENDING&limit=100 200 in 2659ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 39ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: [2025-11-21T22:14:42.646Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 42ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8 - 63ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 36ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 54ms
api:dev: [2025-11-21T22:14:42.711Z] GET /api/maintenance - 200 (176ms)
api:dev:  GET /api/maintenance?status=IN_PROGRESS&limit=100 200 in 210ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104
api:dev: [DB-QUERY] SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104 - 77ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8 - 47ms
api:dev: prisma:query SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102
api:dev: [DB-QUERY] SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102 - 94ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:14:42.773Z] GET /api/admin/users - 200 (623ms)
api:dev:  GET /api/admin/users?limit=100 200 in 2816ms
api:dev: prisma:query SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4 - 134ms
api:dev: [2025-11-21T22:14:42.788Z] GET /api/admin/payments - 200 (635ms)
api:dev:  GET /api/admin/payments?status=PENDING&limit=100 200 in 2831ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 95ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15 - 71ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:14:42.843Z] GET /api/admin/audit - 200 (197ms)
api:dev:  GET /api/admin/audit?severity=CRITICAL&status=FAILED&limit=100 200 in 215ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100","timestamp":"2025-11-21T22:14:42.844Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/reservations/new',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 198,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query BEGIN
api:dev: [DB-QUERY] BEGIN - 37ms
api:dev: [2025-11-21T22:14:42.910Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 39ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus")))
api:dev: [DB-QUERY] UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus"))) - 68ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query COMMIT
api:dev: [DB-QUERY] COMMIT - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 36ms
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 39ms
api:dev: [2025-11-21T22:14:43.026Z] GET /api/admin/orders - 200 (117ms)
api:dev:  GET /api/admin/orders?status=PAID&limit=100 200 in 200ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3 - 66ms
api:dev: Admin reservations request params: { status: 'PENDING', limit: '100' }
api:dev: Admin reservations query where: {
api:dev:   "status": "PENDING"
api:dev: }
api:dev: Admin reservations query params: { skip: 0, limit: 100, sortBy: 'createdAt', sortOrder: 'desc' }
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE "public"."users"."firebase_uid" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE "public"."users"."firebase_uid" = $1 LIMIT $2 OFFSET $3 - 77ms
api:dev: Ô£à [AUTH-TOKEN] JWT generado exitosamente para: cieloyverdad@gmail.com
api:dev:  POST /api/auth/token 200 in 3125ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3 - 40ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub" - 69ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2) OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 42ms
api:dev: Admin reservations query results: { itemsCount: 4, total: 4 }
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 79ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 70ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 40ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 61ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev:  Ôùï Compiling /api/centers ...
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3 - 93ms
api:dev: [2025-11-21T22:14:43.707Z] GET /api/admin/reservations - 200 (1554ms)
api:dev:  GET /api/admin/reservations?status=PENDING&limit=100 200 in 3751ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev:  Ô£ô Compiled /api/centers in 834ms (1713 modules)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: [dotenv@17.2.1] injecting env (0) from .env.local -- tip: ­ƒôí version env with Radar: https://dotenvx.com/radar
api:dev: --- DEBUGGING DATABASE_URL (FIXED) ---
api:dev: DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres?sslmode=require
api:dev: DIRECT_DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres
api:dev: --- FIN DEBUGGING ---
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."centers"."id" FROM "public"."centers" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."centers"."id" FROM "public"."centers" WHERE 1=1 OFFSET $1) AS "sub" - 66ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name", "public"."centers"."address", "public"."centers"."phone", "public"."centers"."email", "public"."centers"."settings", "public"."centers"."timezone", "public"."centers"."day_start", "public"."centers"."night_start", "public"."centers"."created_at", "public"."centers"."updated_at", COALESCE("aggr_selection_0_Court"."_aggr_count_courts", 0) AS "_aggr_count_courts" FROM "public"."centers" LEFT JOIN (SELECT "public"."courts"."center_id", COUNT(*) AS "_aggr_count_courts" FROM "public"."courts" WHERE "public"."courts"."is_active" = $1 GROUP BY "public"."courts"."center_id") AS "aggr_selection_0_Court" ON ("public"."centers"."id" = "aggr_selection_0_Court"."center_id") WHERE 1=1 ORDER BY "public"."centers"."name" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name", "public"."centers"."address", "public"."centers"."phone", "public"."centers"."email", "public"."centers"."settings", "public"."centers"."timezone", "public"."centers"."day_start", "public"."centers"."night_start", "public"."centers"."created_at", "public"."centers"."updated_at", COALESCE("aggr_selection_0_Court"."_aggr_count_courts", 0) AS "_aggr_count_courts" FROM "public"."centers" LEFT JOIN (SELECT "public"."courts"."center_id", COUNT(*) AS "_aggr_count_courts" FROM "public"."courts" WHERE "public"."courts"."is_active" = $1 GROUP BY "public"."courts"."center_id") AS "aggr_selection_0_Court" ON ("public"."centers"."id" = "aggr_selection_0_Court"."center_id") WHERE 1=1 ORDER BY "public"."centers"."name" ASC LIMIT $2 OFFSET $3 - 74ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."base_price_per_hour", "public"."courts"."center_id", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations" FROM "public"."courts" LEFT JOIN (SELECT "public"."reservations"."court_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE ("public"."reservations"."status" IN (CAST($1::text AS "public"."ReservationStatus"),CAST($2::text AS "public"."ReservationStatus"),CAST($3::text AS "public"."ReservationStatus")) AND "public"."reservations"."start_time" >= $4) GROUP BY "public"."reservations"."court_id") AS "aggr_selection_0_Reservation" ON ("public"."courts"."id" = "aggr_selection_0_Reservation"."court_id") WHERE ("public"."courts"."is_active" = $5 AND "public"."courts"."center_id" IN ($6)) OFFSET $7
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."base_price_per_hour", "public"."courts"."center_id", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations" FROM "public"."courts" LEFT JOIN (SELECT "public"."reservations"."court_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE ("public"."reservations"."status" IN (CAST($1::text AS "public"."ReservationStatus"),CAST($2::text AS "public"."ReservationStatus"),CAST($3::text AS "public"."ReservationStatus")) AND "public"."reservations"."start_time" >= $4) GROUP BY "public"."reservations"."court_id") AS "aggr_selection_0_Reservation" ON ("public"."courts"."id" = "aggr_selection_0_Reservation"."court_id") WHERE ("public"."courts"."is_active" = $5 AND "public"."courts"."center_id" IN ($6)) OFFSET $7 - 62ms
api:dev:  GET /api/centers?limit=1 200 in 1162ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev:  Ôùï Compiling /api/centers/[id]/status ...
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev:  Ô£ô Compiled /api/centers/[id]/status in 573ms (1715 modules)
api:dev: [dotenv@17.2.1] injecting env (0) from .env.local -- tip: ­ƒöÉ prevent building .env in docker: https://dotenvx.com/prebuild
api:dev: --- DEBUGGING DATABASE_URL (FIXED) ---
api:dev: DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres?sslmode=require
api:dev: DIRECT_DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres
api:dev: --- FIN DEBUGGING ---
api:dev: [Notifications][SMS] Twilio deshabilitado: variables de entorno no v├ílidas o ausentes.
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub" - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2 - 65ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8 - 64ms
api:dev: [2025-11-21T22:14:45.486Z] GET /api/notifications - 200 (3295ms)
api:dev:  GET /api/notifications?limit=10 200 in 4661ms
api:dev: [dotenv@17.2.1] injecting env (0) from .env.local -- tip: ­ƒôí version env with Radar: https://dotenvx.com/radar
api:dev: --- DEBUGGING DATABASE_URL (FIXED) ---
api:dev: DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres?sslmode=require
api:dev: DIRECT_DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres
api:dev: --- FIN DEBUGGING ---
api:dev: Ô£à [DB] Usando DIRECT_DATABASE_URL para desarrollo
api:dev: ­ƒöù [DB] URL final que se usar├í: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres...
api:dev: ­ƒöù [DB] ┬┐Es Data Proxy?: false
api:dev: ­ƒöù [DB] Longitud de URL: 88
api:dev: ­ƒöù [DB] Primeros 20 caracteres: postgresql://postgre...
api:dev: [Notifications][SMS] Twilio deshabilitado: variables de entorno no v├ílidas o ausentes.
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."timezone", "public"."centers"."settings" FROM "public"."centers" WHERE ("public"."centers"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."timezone", "public"."centers"."settings" FROM "public"."centers" WHERE ("public"."centers"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 60ms
api:dev:  GET /api/centers/cmf29ofi10000l2045cwgdu9a/status 200 in 1904ms
api:dev: [dotenv@17.2.1] injecting env (0) from .env.local -- tip: ÔÜÖ´©Å  specify custom .env file path with { path: '/custom/path/.env' }
api:dev: --- DEBUGGING DATABASE_URL (FIXED) ---
api:dev: DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres?sslmode=require
api:dev: DIRECT_DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres
api:dev: --- FIN DEBUGGING ---
api:dev: Ô£à [DB] Usando DIRECT_DATABASE_URL para desarrollo
api:dev: ­ƒöù [DB] URL final que se usar├í: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres...
api:dev: ­ƒöù [DB] ┬┐Es Data Proxy?: false
api:dev: ­ƒöù [DB] Longitud de URL: 88
api:dev: ­ƒöù [DB] Primeros 20 caracteres: postgresql://postgre...
api:dev: [Notifications][SMS] Twilio deshabilitado: variables de entorno no v├ílidas o ausentes.
api:dev: [2025-11-21T22:15:40.008Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ÔÜá´©Å [REDSYS-CONFIG] No se encontr├│ clave configurada, usando clave gen├®rica de test
api:dev: Ô£à [REDSYS-CONFIG] Clave inicializada correctamente: { keyLength: 24, testMode: true, keySource: 'GENERIC_TEST' }
api:dev: [2025-11-21T22:15:40.153Z] GET /api/admin/reservations - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 33ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:15:40.181Z] GET /api/admin/payments - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:15:40.218Z] GET /api/admin/users - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:15:40.236Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:15:40.253Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 30ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 31ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 30ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 30ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 36ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 34ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:15:40.365Z] GET /api/admin/audit - 200 (129ms)
api:dev:  GET /api/admin/audit?severity=HIGH&status=ERROR&limit=100 200 in 379ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100","timestamp":"2025-11-21T22:15:40.369Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/reservations/new',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 132,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 40ms
api:dev: [2025-11-21T22:15:40.401Z] GET /api/notifications - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/notifications
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub" - 38ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 41ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8 - 86ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 37ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [NOTIFICATIONS] Usuario autenticado: {
api:dev:   id: 'cmepxp3z30000v9fwsubv4aaj',
api:dev:   role: 'ADMIN',
api:dev:   email: 'admin@polideportivo.com',
api:dev:   isUuid: false
api:dev: }
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2 - 77ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 38ms
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 136ms
api:dev: prisma:query SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4 - 113ms
api:dev: [2025-11-21T22:15:40.478Z] GET /api/admin/payments - 200 (297ms)
api:dev:  GET /api/admin/payments?status=PENDING&limit=100 200 in 491ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12 - 35ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 33ms
api:dev: prisma:query SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102
api:dev: [DB-QUERY] SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102 - 33ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8 - 78ms
api:dev: [2025-11-21T22:15:40.508Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 39ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4 - 72ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 69ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 28ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15 - 66ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 30ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:15:40.573Z] GET /api/admin/audit - 200 (65ms)
api:dev:  GET /api/admin/audit?severity=CRITICAL&status=FAILED&limit=100 200 in 84ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100","timestamp":"2025-11-21T22:15:40.575Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/reservations/new',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 67,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104
api:dev: [DB-QUERY] SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104 - 91ms
api:dev: [2025-11-21T22:15:40.579Z] GET /api/admin/users - 200 (361ms)
api:dev:  GET /api/admin/users?limit=100 200 in 592ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 71ms
api:dev: prisma:query BEGIN
api:dev: [DB-QUERY] BEGIN - 32ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 68ms
api:dev: [2025-11-21T22:15:40.605Z] GET /api/maintenance - 200 (597ms)
api:dev:  GET /api/maintenance?status=SCHEDULED&limit=100 200 in 651ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: [2025-11-21T22:15:40.634Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2 - 64ms
api:dev: [2025-11-21T22:15:40.663Z] GET /api/admin/orders - 200 (410ms)
api:dev:  GET /api/admin/orders?status=PENDING&limit=100 200 in 676ms
api:dev: prisma:query UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus")))
api:dev: [DB-QUERY] UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus"))) - 68ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 30ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:15:40.692Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 30ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query COMMIT
api:dev: [DB-QUERY] COMMIT - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 29ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 31ms
api:dev: [2025-11-21T22:15:40.732Z] GET /api/maintenance - 200 (98ms)
api:dev:  GET /api/maintenance?status=IN_PROGRESS&limit=100 200 in 116ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3 - 63ms
api:dev: Admin reservations request params: { status: 'PENDING', limit: '100' }
api:dev: Admin reservations query where: {
api:dev:   "status": "PENDING"
api:dev: }
api:dev: Admin reservations query params: { skip: 0, limit: 100, sortBy: 'createdAt', sortOrder: 'desc' }
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 62ms
api:dev: [2025-11-21T22:15:40.821Z] GET /api/admin/orders - 200 (129ms)
api:dev:  GET /api/admin/orders?status=PAID&limit=100 200 in 148ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub" - 60ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3 - 64ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3 - 72ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2) OFFSET $3 - 62ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 39ms
api:dev: Admin reservations query results: { itemsCount: 4, total: 4 }
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 64ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3 - 36ms
api:dev: [2025-11-21T22:15:41.142Z] GET /api/admin/reservations - 200 (989ms)
api:dev:  GET /api/admin/reservations?status=PENDING&limit=100 200 in 1156ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 28ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 42ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 27ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub" - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2 - 35ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8 - 35ms
api:dev: [2025-11-21T22:15:42.212Z] GET /api/notifications - 200 (1811ms)
api:dev:  GET /api/notifications?limit=10 200 in 1837ms
api:dev: [2025-11-21T22:16:39.985Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:16:40.020Z] GET /api/admin/reservations - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:16:40.045Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:16:40.048Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:16:40.052Z] GET /api/admin/payments - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:16:40.054Z] GET /api/admin/users - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 69ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 66ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 72ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 68ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 67ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 67ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 28ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 37ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 45ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 40ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 40ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:16:40.431Z] GET /api/admin/audit - 200 (383ms)
api:dev:  GET /api/admin/audit?severity=HIGH&status=ERROR&limit=100 200 in 452ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100","timestamp":"2025-11-21T22:16:40.433Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/reservations/new',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 385,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 40ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: [2025-11-21T22:16:40.462Z] GET /api/notifications - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/notifications
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 72ms
api:dev: prisma:query SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4 - 75ms
api:dev: [2025-11-21T22:16:40.499Z] GET /api/admin/payments - 200 (447ms)
api:dev:  GET /api/admin/payments?status=PENDING&limit=100 200 in 520ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub" - 76ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8 - 79ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 75ms
api:dev: [2025-11-21T22:16:40.524Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2 - 116ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8 - 69ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 30ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:16:40.594Z] GET /api/admin/audit - 200 (70ms)
api:dev:  GET /api/admin/audit?severity=CRITICAL&status=FAILED&limit=100 200 in 87ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100","timestamp":"2025-11-21T22:16:40.595Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/reservations/new',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 71,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104
api:dev: [DB-QUERY] SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104 - 71ms
api:dev: prisma:query SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102
api:dev: [DB-QUERY] SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102 - 71ms
api:dev: [2025-11-21T22:16:40.626Z] GET /api/admin/users - 200 (572ms)
api:dev:  GET /api/admin/users?limit=100 200 in 647ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15 - 65ms
api:dev: prisma:query BEGIN
api:dev: [DB-QUERY] BEGIN - 29ms
api:dev: prisma:query UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus")))
api:dev: [DB-QUERY] UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus"))) - 68ms
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 67ms
api:dev: prisma:query COMMIT
api:dev: [DB-QUERY] COMMIT - 32ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 107ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 69ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [NOTIFICATIONS] Usuario autenticado: {
api:dev:   id: 'cmepxp3z30000v9fwsubv4aaj',
api:dev:   role: 'ADMIN',
api:dev:   email: 'admin@polideportivo.com',
api:dev:   isUuid: false
api:dev: }
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3 - 62ms
api:dev: Admin reservations request params: { status: 'PENDING', limit: '100' }
api:dev: Admin reservations query where: {
api:dev:   "status": "PENDING"
api:dev: }
api:dev: Admin reservations query params: { skip: 0, limit: 100, sortBy: 'createdAt', sortOrder: 'desc' }
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 67ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4 - 72ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12 - 71ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub" - 62ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3 - 62ms
api:dev: prisma:query SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 65ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 65ms
api:dev: [2025-11-21T22:16:40.918Z] GET /api/maintenance - 200 (933ms)
api:dev:  GET /api/maintenance?status=SCHEDULED&limit=100 200 in 962ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 68ms
api:dev: [2025-11-21T22:16:40.940Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3 - 64ms
api:dev: prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2 - 67ms
api:dev: [2025-11-21T22:16:40.982Z] GET /api/admin/orders - 200 (937ms)
api:dev:  GET /api/admin/orders?status=PENDING&limit=100 200 in 1003ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: [2025-11-21T22:16:41.004Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 60ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2) OFFSET $3 - 63ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 38ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 73ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 28ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 65ms
api:dev: Admin reservations query results: { itemsCount: 4, total: 4 }
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 60ms
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 60ms
api:dev: [2025-11-21T22:16:41.141Z] GET /api/admin/orders - 200 (137ms)
api:dev:  GET /api/admin/orders?status=PAID&limit=100 200 in 150ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 65ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 66ms
api:dev: [2025-11-21T22:16:41.146Z] GET /api/maintenance - 200 (206ms)
api:dev:  GET /api/maintenance?status=IN_PROGRESS&limit=100 200 in 218ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 68ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 65ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 27ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3 - 92ms
api:dev: [2025-11-21T22:16:41.331Z] GET /api/admin/reservations - 200 (1311ms)
api:dev:  GET /api/admin/reservations?status=PENDING&limit=100 200 in 1353ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 40ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 46ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2 - 69ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub" - 70ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8 - 79ms
api:dev: [2025-11-21T22:16:42.728Z] GET /api/notifications - 200 (2266ms)
api:dev:  GET /api/notifications?limit=10 200 in 2284ms
api:dev:  Ôùï Compiling /_not-found ...
api:dev:  Ô£ô Compiled /_not-found in 965ms (1933 modules)
api:dev:  GET /api/public/landing 404 in 1237ms
api:dev:  POST /api/presence/heartbeat 404 in 1236ms
api:dev:  POST /api/presence/heartbeat 404 in 1235ms
api:dev:  POST /api/presence/heartbeat 404 in 53ms
api:dev:  POST /api/presence/heartbeat 404 in 52ms
api:dev: [dotenv@17.2.1] injecting env (0) from .env.local -- tip: ÔÜÖ´©Å  override existing env vars with { override: true }
api:dev: --- DEBUGGING DATABASE_URL (FIXED) ---
api:dev: DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres?sslmode=require
api:dev: DIRECT_DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres
api:dev: --- FIN DEBUGGING ---
api:dev: [Notifications][SMS] Twilio deshabilitado: variables de entorno no v├ílidas o ausentes.
api:dev: [2025-11-21T22:17:40.281Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ÔÜá´©Å [REDSYS-CONFIG] No se encontr├│ clave configurada, usando clave gen├®rica de test
api:dev: Ô£à [REDSYS-CONFIG] Clave inicializada correctamente: { keyLength: 24, testMode: true, keySource: 'GENERIC_TEST' }
api:dev: [2025-11-21T22:17:40.388Z] GET /api/admin/reservations - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 34ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 38ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:17:40.431Z] GET /api/admin/payments - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:17:40.483Z] GET /api/admin/users - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:17:40.501Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:17:40.518Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 29ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 33ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 35ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 35ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 35ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 34ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 29ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 30ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8 - 32ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 68ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 35ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:17:40.635Z] GET /api/admin/audit - 200 (117ms)
api:dev:  GET /api/admin/audit?severity=HIGH&status=ERROR&limit=100 200 in 658ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100","timestamp":"2025-11-21T22:17:40.638Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/reservations/new',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 119,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 41ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 41ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: [2025-11-21T22:17:40.686Z] GET /api/notifications - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/notifications
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 100ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8 - 60ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub" - 71ms
api:dev: prisma:query SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4 - 80ms
api:dev: [2025-11-21T22:17:40.715Z] GET /api/admin/payments - 200 (284ms)
api:dev:  GET /api/admin/payments?status=PENDING&limit=100 200 in 737ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 79ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 31ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4 - 67ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2 - 108ms
api:dev: [2025-11-21T22:17:40.759Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 74ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15 - 71ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [NOTIFICATIONS] Usuario autenticado: {
api:dev:   id: 'cmepxp3z30000v9fwsubv4aaj',
api:dev:   role: 'ADMIN',
api:dev:   email: 'admin@polideportivo.com',
api:dev:   isUuid: false
api:dev: }
api:dev: prisma:query BEGIN
api:dev: [DB-QUERY] BEGIN - 37ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 37ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102
api:dev: [DB-QUERY] SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102 - 70ms
api:dev: prisma:query SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 79ms
api:dev: prisma:query SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104
api:dev: [DB-QUERY] SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104 - 72ms
api:dev: [2025-11-21T22:17:40.830Z] GET /api/admin/users - 200 (347ms)
api:dev:  GET /api/admin/users?limit=100 200 in 852ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 73ms
api:dev: [2025-11-21T22:17:40.838Z] GET /api/maintenance - 200 (557ms)
api:dev:  GET /api/maintenance?status=SCHEDULED&limit=100 200 in 884ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12 - 76ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:17:40.840Z] GET /api/admin/audit - 200 (81ms)
api:dev:  GET /api/admin/audit?severity=CRITICAL&status=FAILED&limit=100 200 in 103ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100","timestamp":"2025-11-21T22:17:40.842Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/reservations/new',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 83,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: [2025-11-21T22:17:40.871Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus")))
api:dev: [DB-QUERY] UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus"))) - 70ms
api:dev: prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2 - 71ms
api:dev: [2025-11-21T22:17:40.899Z] GET /api/admin/orders - 200 (398ms)
api:dev:  GET /api/admin/orders?status=PENDING&limit=100 200 in 921ms
api:dev: prisma:query COMMIT
api:dev: [DB-QUERY] COMMIT - 32ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 74ms
api:dev: [2025-11-21T22:17:40.926Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 40ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3 - 64ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: Admin reservations request params: { status: 'PENDING', limit: '100' }
api:dev: Admin reservations query where: {
api:dev:   "status": "PENDING"
api:dev: }
api:dev: Admin reservations query params: { skip: 0, limit: 100, sortBy: 'createdAt', sortOrder: 'desc' }
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 67ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 39ms
api:dev: [2025-11-21T22:17:40.990Z] GET /api/maintenance - 200 (119ms)
api:dev:  GET /api/maintenance?status=IN_PROGRESS&limit=100 200 in 141ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub" - 67ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3 - 67ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 38ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 78ms
api:dev: [2025-11-21T22:17:41.085Z] GET /api/admin/orders - 200 (159ms)
api:dev:  GET /api/admin/orders?status=PAID&limit=100 200 in 177ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4 - 78ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3) OFFSET $4 - 64ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 65ms
api:dev: Admin reservations query results: { itemsCount: 5, total: 5 }
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 66ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 66ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3 - 106ms
api:dev: [2025-11-21T22:17:41.493Z] GET /api/admin/reservations - 200 (1105ms)
api:dev:  GET /api/admin/reservations?status=PENDING&limit=100 200 in 1515ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 40ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 42ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 39ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2 - 64ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub" - 65ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8 - 61ms
api:dev: [2025-11-21T22:17:42.782Z] GET /api/notifications - 200 (2096ms)
api:dev:  GET /api/notifications?limit=10 200 in 2134ms
api:dev: [2025-11-21T22:17:46.967Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:17:47.003Z] GET /api/admin/users - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:17:47.005Z] GET /api/admin/reservations - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:17:47.007Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:17:47.010Z] GET /api/admin/payments - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:17:47.013Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 29ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 35ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:17:47.087Z] GET /api/admin/audit - 200 (74ms)
api:dev:  GET /api/admin/audit?severity=HIGH&status=ERROR&limit=100 200 in 148ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100","timestamp":"2025-11-21T22:17:47.089Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/reservations/new',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 75,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: [2025-11-21T22:17:47.117Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub" - 29ms
api:dev: prisma:query SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4 - 38ms
api:dev: [2025-11-21T22:17:47.130Z] GET /api/admin/payments - 200 (120ms)
api:dev:  GET /api/admin/payments?status=PENDING&limit=100 200 in 191ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 65ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8 - 60ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 71ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 71ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 112ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8 - 32ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2 - 105ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:17:47.194Z] GET /api/admin/audit - 200 (77ms)
api:dev:  GET /api/admin/audit?severity=CRITICAL&status=FAILED&limit=100 200 in 97ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100","timestamp":"2025-11-21T22:17:47.195Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/reservations/new',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 78,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15 - 34ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4 - 66ms
api:dev: prisma:query BEGIN
api:dev: [DB-QUERY] BEGIN - 30ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 69ms
api:dev: prisma:query SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102
api:dev: [DB-QUERY] SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102 - 61ms
api:dev: prisma:query SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104
api:dev: [DB-QUERY] SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104 - 63ms
api:dev: [2025-11-21T22:17:47.264Z] GET /api/admin/users - 200 (261ms)
api:dev:  GET /api/admin/users?limit=100 200 in 325ms
api:dev: prisma:query SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 63ms
api:dev: prisma:query UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus")))
api:dev: [DB-QUERY] UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus"))) - 58ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 65ms
api:dev: [2025-11-21T22:17:47.320Z] GET /api/maintenance - 200 (353ms)
api:dev:  GET /api/maintenance?status=SCHEDULED&limit=100 200 in 381ms
api:dev: prisma:query COMMIT
api:dev: [DB-QUERY] COMMIT - 32ms
api:dev: [2025-11-21T22:17:47.349Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2 - 61ms
api:dev: [2025-11-21T22:17:47.355Z] GET /api/admin/orders - 200 (348ms)
api:dev:  GET /api/admin/orders?status=PENDING&limit=100 200 in 416ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 29ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:17:47.387Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3 - 66ms
api:dev: Admin reservations request params: { status: 'PENDING', limit: '100' }
api:dev: Admin reservations query where: {
api:dev:   "status": "PENDING"
api:dev: }
api:dev: Admin reservations query params: { skip: 0, limit: 100, sortBy: 'createdAt', sortOrder: 'desc' }
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 29ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 31ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3 - 59ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub" - 60ms
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 64ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 31ms
api:dev: [2025-11-21T22:17:47.485Z] GET /api/admin/orders - 200 (98ms)
api:dev:  GET /api/admin/orders?status=PAID&limit=100 200 in 118ms
api:dev: [2025-11-21T22:17:47.487Z] GET /api/maintenance - 200 (138ms)
api:dev:  GET /api/maintenance?status=IN_PROGRESS&limit=100 200 in 155ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4 - 65ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3) OFFSET $4 - 65ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 66ms
api:dev: Admin reservations query results: { itemsCount: 5, total: 5 }
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 61ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 61ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3 - 96ms
api:dev: [2025-11-21T22:17:47.892Z] GET /api/admin/reservations - 200 (887ms)
api:dev:  GET /api/admin/reservations?status=PENDING&limit=100 200 in 953ms
admin:dev:  Ôùï Compiling /api/auth/[...nextauth] ...
admin:dev:  Ô£ô Compiled /api/auth/[...nextauth] in 879ms (471 modules)
admin:dev: [NextAuth][warn] debug-enabled
admin:dev:  GET /api/auth/csrf 200 in 1829ms
admin:dev:  POST /api/auth/signout 200 in 65ms
admin:dev:  Ôùï Compiling /auth/signin ...
admin:dev:  Ô£ô Compiled /auth/signin in 3.1s (920 modules)
admin:dev:  Ô£ô Compiled in 769ms (298 modules)
admin:dev:  GET /auth/signin 200 in 3903ms
admin:dev: [NextAuth][warn] debug-enabled
admin:dev:  GET /api/auth/session 200 in 121ms
admin:dev:  GET /api/auth/session 200 in 119ms
admin:dev:  Ô£ô Compiled /middleware in 434ms (228 modules)
admin:dev:  GET /api/auth/session 200 in 93ms
admin:dev:  GET /api/auth/session 200 in 157ms
admin:dev:  GET /auth/signin 200 in 62ms
api:dev:  GET /api/public/landing 404 in 73ms
api:dev:  POST /api/presence/heartbeat 404 in 68ms
api:dev:  POST /api/presence/heartbeat 404 in 68ms
admin:dev:  GET /api/auth/providers 200 in 29ms
admin:dev:  GET /api/auth/csrf 200 in 16ms
api:dev:  Ôùï Compiling /api/auth/signin ...
api:dev:  Ô£ô Compiled /api/auth/signin in 974ms (1935 modules)
api:dev: [dotenv@17.2.1] injecting env (0) from .env.local -- tip: ­ƒöÉ encrypt with Dotenvx: https://dotenvx.com
api:dev: --- DEBUGGING DATABASE_URL (FIXED) ---
api:dev: DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres?sslmode=require
api:dev: DIRECT_DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres
api:dev: --- FIN DEBUGGING ---
api:dev: [Notifications][SMS] Twilio deshabilitado: variables de entorno no v├ílidas o ausentes.
api:dev: [2025-11-21T22:18:13.644Z] POST /api/auth/signin - Iniciado
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 37ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."email" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."email" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 74ms
api:dev: prisma:query INSERT INTO "public"."refresh_tokens" ("id","token","user_id","expires_at","created_at") VALUES ($1,$2,$3,$4,$5) RETURNING "public"."refresh_tokens"."id", "public"."refresh_tokens"."token", "public"."refresh_tokens"."user_id", "public"."refresh_tokens"."expires_at", "public"."refresh_tokens"."created_at"
api:dev: [DB-QUERY] INSERT INTO "public"."refresh_tokens" ("id","token","user_id","expires_at","created_at") VALUES ($1,$2,$3,$4,$5) RETURNING "public"."refresh_tokens"."id", "public"."refresh_tokens"."token", "public"."refresh_tokens"."user_id", "public"."refresh_tokens"."expires_at", "public"."refresh_tokens"."created_at" - 89ms
api:dev: prisma:query UPDATE "public"."users" SET "last_login_at" = $1, "updated_at" = $2 WHERE ("public"."users"."id" = $3 AND 1=1) RETURNING "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code"
api:dev: [DB-QUERY] UPDATE "public"."users" SET "last_login_at" = $1, "updated_at" = $2 WHERE ("public"."users"."id" = $3 AND 1=1) RETURNING "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" - 77ms
api:dev: [2025-11-21T22:18:14.248Z] POST /api/auth/signin - 200 (604ms)
api:dev:  POST /api/auth/signin 200 in 1864ms
admin:dev:  POST /api/auth/callback/credentials? 200 in 1902ms
admin:dev:  GET /api/auth/session 200 in 23ms
admin:dev:  Ôùï Compiling / ...
admin:dev:  Ô£ô Compiled / in 719ms (921 modules)
admin:dev:  GET / 200 in 864ms
api:dev:  Ôùï Compiling /api/admin/reports ...
api:dev:  Ô£ô Compiled /api/admin/reports in 1193ms (1937 modules)
api:dev: [dotenv@17.2.1] injecting env (0) from .env.local -- tip: ÔÜÖ´©Å  write to custom object with { processEnv: myObject }
api:dev: --- DEBUGGING DATABASE_URL (FIXED) ---
api:dev: DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres?sslmode=require
api:dev: DIRECT_DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres
api:dev: --- FIN DEBUGGING ---
api:dev: [Notifications][SMS] Twilio deshabilitado: variables de entorno no v├ílidas o ausentes.
api:dev: ÔÜá´©Å [REDSYS-CONFIG] No se encontr├│ clave configurada, usando clave gen├®rica de test
api:dev: Ô£à [REDSYS-CONFIG] Clave inicializada correctamente: { keyLength: 24, testMode: true, keySource: 'GENERIC_TEST' }
api:dev: [2025-11-21T22:18:16.676Z] GET /api/admin/reservations - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:18:16.732Z] GET /api/admin/users - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:18:16.743Z] GET /api/admin/payments - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:18:16.755Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:18:16.770Z] GET /api/admin/reports - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reports
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:18:16.784Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 31ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 31ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 32ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 31ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 32ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 35ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reports
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ­ƒôà [DATE_RANGE] Calculando rango de fechas: {
api:dev:   period: '30d',
api:dev:   startDate: '2025-10-22T00:00:00.000Z',
api:dev:   endDate: '2025-11-21T23:59:59.999Z'
api:dev: }
api:dev: ­ƒôè [REPORTS] Generando reporte usage para per├¡odo 30d: {
api:dev:   startDate: '2025-10-22T00:00:00.000Z',
api:dev:   endDate: '2025-11-21T23:59:59.999Z',
api:dev:   centerId: undefined,
api:dev:   groupBy: 'day',
api:dev:   allParams: { type: 'usage', period: '30d', format: 'json', groupBy: 'day' }
api:dev: }
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8 - 65ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 33ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 34ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 33ms
api:dev: prisma:query SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4 - 61ms
api:dev: [2025-11-21T22:18:16.964Z] GET /api/admin/payments - 200 (221ms)
api:dev:  GET /api/admin/payments?status=PENDING&limit=100 200 in 1688ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."court_id" FROM "public"."reservations" WHERE ("public"."reservations"."created_at" >= $1 AND "public"."reservations"."created_at" <= $2) ORDER BY "public"."reservations"."id" ASC LIMIT $3 OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."court_id" FROM "public"."reservations" WHERE ("public"."reservations"."created_at" >= $1 AND "public"."reservations"."created_at" <= $2) ORDER BY "public"."reservations"."id" ASC LIMIT $3 OFFSET $4 - 59ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE ("public"."reservations"."created_at" >= $1 AND "public"."reservations"."created_at" <= $2 AND "public"."reservations"."status" IN (CAST($3::text AS "public"."ReservationStatus"),CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus"))) OFFSET $6) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE ("public"."reservations"."created_at" >= $1 AND "public"."reservations"."created_at" <= $2 AND "public"."reservations"."status" IN (CAST($3::text AS "public"."ReservationStatus"),CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus"))) OFFSET $6) AS "sub" - 65ms
api:dev: prisma:query SELECT COUNT("public"."reservations"."id"), "public"."reservations"."status"::text FROM "public"."reservations" WHERE ("public"."reservations"."created_at" >= $1 AND "public"."reservations"."created_at" <= $2) GROUP BY "public"."reservations"."status" OFFSET $3
api:dev: [DB-QUERY] SELECT COUNT("public"."reservations"."id"), "public"."reservations"."status"::text FROM "public"."reservations" WHERE ("public"."reservations"."created_at" >= $1 AND "public"."reservations"."created_at" <= $2) GROUP BY "public"."reservations"."status" OFFSET $3 - 66ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 70ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8 - 61ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub" - 71ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 60ms
api:dev: Ô£à [REPORTS] Reporte usage generado exitosamente: {
api:dev:   summary: { totalReservations: 27 },
api:dev:   dataKeys: [ 'summary', 'bySport', 'byStatus' ],
api:dev:   generatedAt: '2025-11-21T22:18:17.037Z'
api:dev: }
api:dev: [2025-11-21T22:18:17.037Z] GET /api/admin/reports - 200 (267ms)
api:dev:  GET /api/admin/reports?type=usage&period=30d 200 in 1801ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 100ms
api:dev: [2025-11-21T22:18:17.061Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2 - 108ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15 - 71ms
api:dev: prisma:query BEGIN
api:dev: [DB-QUERY] BEGIN - 30ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 65ms
api:dev: [2025-11-21T22:18:17.133Z] GET /api/notifications - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/notifications
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104
api:dev: [DB-QUERY] SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104 - 74ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 32ms
api:dev: prisma:query SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102
api:dev: [DB-QUERY] SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102 - 75ms
api:dev: [2025-11-21T22:18:17.142Z] GET /api/admin/users - 200 (410ms)
api:dev:  GET /api/admin/users?limit=100 200 in 1865ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 30ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:18:17.145Z] GET /api/admin/audit - 200 (84ms)
api:dev:  GET /api/admin/audit?severity=HIGH&status=ERROR&limit=100 200 in 168ms
api:dev: [2025-11-21T22:18:17.149Z] GET /api/maintenance - 200 (365ms)
api:dev:  GET /api/maintenance?status=SCHEDULED&limit=100 200 in 1874ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100","timestamp":"2025-11-21T22:18:17.151Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 90,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus")))
api:dev: [DB-QUERY] UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus"))) - 64ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [NOTIFICATIONS] Usuario autenticado: {
api:dev:   id: 'cmepxp3z30000v9fwsubv4aaj',
api:dev:   role: 'ADMIN',
api:dev:   email: 'admin@polideportivo.com',
api:dev:   isUuid: false
api:dev: }
api:dev: prisma:query COMMIT
api:dev: [DB-QUERY] COMMIT - 27ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12 - 67ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3 - 63ms
api:dev: Admin reservations request params: { status: 'PENDING', limit: '100' }
api:dev: Admin reservations query where: {
api:dev:   "status": "PENDING"
api:dev: }
api:dev: Admin reservations query params: { skip: 0, limit: 100, sortBy: 'createdAt', sortOrder: 'desc' }
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 73ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 71ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 68ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4 - 34ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4 - 68ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub" - 72ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3) OFFSET $4 - 39ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 38ms
api:dev: prisma:query SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 78ms
api:dev: prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2 - 68ms
api:dev: Admin reservations query results: { itemsCount: 5, total: 5 }
api:dev: [2025-11-21T22:18:17.498Z] GET /api/admin/orders - 200 (743ms)
api:dev:  GET /api/admin/orders?status=PENDING&limit=100 200 in 2221ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 68ms
api:dev:  Ôùï Compiling /api/admin/activity ...
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 76ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 82ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3 - 35ms
api:dev: [2025-11-21T22:18:17.841Z] GET /api/admin/reservations - 200 (1165ms)
api:dev:  GET /api/admin/reservations?status=PENDING&limit=100 200 in 2564ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev:  Ô£ô Compiled /api/admin/activity in 1951ms (1941 modules)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: [dotenv@17.2.1] injecting env (0) from .env.local -- tip: ÔÜÖ´©Å  write to custom object with { processEnv: myObject }
api:dev: --- DEBUGGING DATABASE_URL (FIXED) ---
api:dev: DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres?sslmode=require
api:dev: DIRECT_DATABASE_URL: postgresql://postgres:***@db.rcknclvzxheitotnhmhn.supabase.co:5432/postgres
api:dev: --- FIN DEBUGGING ---
api:dev: [Notifications][SMS] Twilio deshabilitado: variables de entorno no v├ílidas o ausentes.
api:dev: [2025-11-21T22:18:19.292Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:18:19.311Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:18:19.328Z] GET /api/admin/dashboard - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/dashboard
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:18:19.348Z] GET /api/admin/activity - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/activity
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:18:19.360Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/dashboard
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 27ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 61ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/activity
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 30ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:18:19.435Z] GET /api/admin/audit - 200 (124ms)
api:dev:  GET /api/admin/audit?severity=CRITICAL&status=FAILED&limit=100 200 in 2269ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100","timestamp":"2025-11-21T22:18:19.436Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 125,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 33ms
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 62ms
api:dev: [2025-11-21T22:18:19.502Z] GET /api/admin/orders - 200 (210ms)
api:dev:  GET /api/admin/orders?status=PAID&limit=100 200 in 1634ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 65ms
api:dev: [2025-11-21T22:18:19.505Z] GET /api/maintenance - 200 (145ms)
api:dev:  GET /api/maintenance?status=IN_PROGRESS&limit=100 200 in 1929ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."is_active" = $1 OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."is_active" = $1 OFFSET $2) AS "sub" - 67ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE ("public"."users"."created_at" >= $1 AND "public"."users"."created_at" <= $2) OFFSET $3) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE ("public"."users"."created_at" >= $1 AND "public"."users"."created_at" <= $2) OFFSET $3) AS "sub" - 67ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE ("public"."reservations"."created_at" >= $1 AND "public"."reservations"."created_at" <= $2) OFFSET $3) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE ("public"."reservations"."created_at" >= $1 AND "public"."reservations"."created_at" <= $2) OFFSET $3) AS "sub" - 67ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."memberships"."id" FROM "public"."memberships" WHERE ("public"."memberships"."created_at" >= $1 AND "public"."memberships"."created_at" <= $2) OFFSET $3) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."memberships"."id" FROM "public"."memberships" WHERE ("public"."memberships"."created_at" >= $1 AND "public"."memberships"."created_at" <= $2) OFFSET $3) AS "sub" - 67ms
api:dev: prisma:query SELECT SUM("amount_euro") FROM (SELECT "public"."ledger_transactions"."amount_euro" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus") AND "public"."ledger_transactions"."paid_at" >= $3 AND "public"."ledger_transactions"."paid_at" <= $4) OFFSET $5) AS "sub"
api:dev: [DB-QUERY] SELECT SUM("amount_euro") FROM (SELECT "public"."ledger_transactions"."amount_euro" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus") AND "public"."ledger_transactions"."paid_at" >= $3 AND "public"."ledger_transactions"."paid_at" <= $4) OFFSET $5) AS "sub" - 69ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."created_at" >= $1 AND "public"."outbox_events"."event_type" IN ($2,$3,$4)) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $5 OFFSET $6
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."created_at" >= $1 AND "public"."outbox_events"."event_type" IN ($2,$3,$4)) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $5 OFFSET $6 - 65ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."created_at" FROM "public"."users" WHERE "public"."users"."created_at" >= $1 ORDER BY "public"."users"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."name", "public"."users"."created_at" FROM "public"."users" WHERE "public"."users"."created_at" >= $1 ORDER BY "public"."users"."created_at" DESC LIMIT $2 OFFSET $3 - 65ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."tournaments"."id" FROM "public"."tournaments" WHERE ("public"."tournaments"."created_at" >= $1 AND "public"."tournaments"."created_at" <= $2) OFFSET $3) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."tournaments"."id" FROM "public"."tournaments" WHERE ("public"."tournaments"."created_at" >= $1 AND "public"."tournaments"."created_at" <= $2) OFFSET $3) AS "sub" - 78ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."created_at" >= $1 ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."created_at" >= $1 ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3 - 82ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."updated_at" >= $2) ORDER BY "public"."reservations"."updated_at" DESC LIMIT $3 OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."updated_at" >= $2) ORDER BY "public"."reservations"."updated_at" DESC LIMIT $3 OFFSET $4 - 72ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."memberships"."id" FROM "public"."memberships" WHERE ("public"."memberships"."created_at" >= $1 AND "public"."memberships"."created_at" <= $2) OFFSET $3) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."memberships"."id" FROM "public"."memberships" WHERE ("public"."memberships"."created_at" >= $1 AND "public"."memberships"."created_at" <= $2) OFFSET $3) AS "sub" - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."tournaments"."id" FROM "public"."tournaments" WHERE ("public"."tournaments"."created_at" >= $1 AND "public"."tournaments"."created_at" <= $2) OFFSET $3) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."tournaments"."id" FROM "public"."tournaments" WHERE ("public"."tournaments"."created_at" >= $1 AND "public"."tournaments"."created_at" <= $2) OFFSET $3) AS "sub" - 64ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE ("public"."users"."created_at" >= $1 AND "public"."users"."created_at" <= $2) OFFSET $3) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE ("public"."users"."created_at" >= $1 AND "public"."users"."created_at" <= $2) OFFSET $3) AS "sub" - 66ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."is_active" = $1 OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE "public"."users"."is_active" = $1 OFFSET $2) AS "sub" - 66ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE ("public"."reservations"."created_at" >= $1 AND "public"."reservations"."created_at" <= $2) OFFSET $3) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE ("public"."reservations"."created_at" >= $1 AND "public"."reservations"."created_at" <= $2) OFFSET $3) AS "sub" - 74ms
api:dev: prisma:query SELECT SUM("amount_euro") FROM (SELECT "public"."ledger_transactions"."amount_euro" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus") AND "public"."ledger_transactions"."paid_at" >= $3 AND "public"."ledger_transactions"."paid_at" <= $4) OFFSET $5) AS "sub"
api:dev: [DB-QUERY] SELECT SUM("amount_euro") FROM (SELECT "public"."ledger_transactions"."amount_euro" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus") AND "public"."ledger_transactions"."paid_at" >= $3 AND "public"."ledger_transactions"."paid_at" <= $4) OFFSET $5) AS "sub" - 75ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3 - 65ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1) OFFSET $2 - 68ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT SUM("public"."ledger_transactions"."amount_euro"), "public"."ledger_transactions"."paid_at" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus") AND "public"."ledger_transactions"."paid_at" >= $3 AND "public"."ledger_transactions"."paid_at" <= $4) GROUP BY "public"."ledger_transactions"."paid_at" OFFSET $5
api:dev: [DB-QUERY] SELECT SUM("public"."ledger_transactions"."amount_euro"), "public"."ledger_transactions"."paid_at" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus") AND "public"."ledger_transactions"."paid_at" >= $3 AND "public"."ledger_transactions"."paid_at" <= $4) GROUP BY "public"."ledger_transactions"."paid_at" OFFSET $5 - 64ms
api:dev: prisma:query SELECT COUNT("public"."tournaments"."id"), "public"."tournaments"."created_at" FROM "public"."tournaments" WHERE ("public"."tournaments"."created_at" >= $1 AND "public"."tournaments"."created_at" <= $2) GROUP BY "public"."tournaments"."created_at" OFFSET $3
api:dev: [DB-QUERY] SELECT COUNT("public"."tournaments"."id"), "public"."tournaments"."created_at" FROM "public"."tournaments" WHERE ("public"."tournaments"."created_at" >= $1 AND "public"."tournaments"."created_at" <= $2) GROUP BY "public"."tournaments"."created_at" OFFSET $3 - 64ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT COUNT("public"."users"."id"), "public"."users"."created_at" FROM "public"."users" WHERE ("public"."users"."created_at" >= $1 AND "public"."users"."created_at" <= $2) GROUP BY "public"."users"."created_at" OFFSET $3
api:dev: [DB-QUERY] SELECT COUNT("public"."users"."id"), "public"."users"."created_at" FROM "public"."users" WHERE ("public"."users"."created_at" >= $1 AND "public"."users"."created_at" <= $2) GROUP BY "public"."users"."created_at" OFFSET $3 - 64ms
api:dev: prisma:query SELECT COUNT("public"."memberships"."id"), "public"."memberships"."created_at" FROM "public"."memberships" WHERE ("public"."memberships"."created_at" >= $1 AND "public"."memberships"."created_at" <= $2) GROUP BY "public"."memberships"."created_at" OFFSET $3
api:dev: [DB-QUERY] SELECT COUNT("public"."memberships"."id"), "public"."memberships"."created_at" FROM "public"."memberships" WHERE ("public"."memberships"."created_at" >= $1 AND "public"."memberships"."created_at" <= $2) GROUP BY "public"."memberships"."created_at" OFFSET $3 - 70ms
api:dev: prisma:query SELECT COUNT("public"."reservations"."id"), "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."created_at" >= $1 AND "public"."reservations"."created_at" <= $2) GROUP BY "public"."reservations"."created_at" OFFSET $3
api:dev: [DB-QUERY] SELECT COUNT("public"."reservations"."id"), "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."created_at" >= $1 AND "public"."reservations"."created_at" <= $2) GROUP BY "public"."reservations"."created_at" OFFSET $3 - 70ms
api:dev: [2025-11-21T22:18:19.922Z] GET /api/admin/dashboard - 200 (594ms)
api:dev:  GET /api/admin/dashboard 200 in 2762ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2) OFFSET $3 - 65ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 27ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."id" IN ($1,$2,$3,$4,$5,$6) OFFSET $7
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."id" IN ($1,$2,$3,$4,$5,$6) OFFSET $7 - 62ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 36ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2) OFFSET $3 - 64ms
api:dev: [2025-11-21T22:18:20.091Z] GET /api/admin/activity - 200 (743ms)
api:dev:  GET /api/admin/activity?limit=5&hours=24 200 in 2931ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub" - 65ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2 - 66ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8 - 64ms
api:dev: [2025-11-21T22:18:20.474Z] GET /api/notifications - 200 (3341ms)
api:dev:  GET /api/notifications?limit=10 200 in 3401ms
api:dev:  POST /api/presence/heartbeat 404 in 130ms
api:dev:  POST /api/presence/heartbeat 404 in 130ms
api:dev: [2025-11-21T22:18:45.280Z] GET /api/notifications - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/notifications
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 33ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [NOTIFICATIONS] Usuario autenticado: {
api:dev:   id: 'cmepxp3z30000v9fwsubv4aaj',
api:dev:   role: 'ADMIN',
api:dev:   email: 'admin@polideportivo.com',
api:dev:   isUuid: false
api:dev: }
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) AND "public"."outbox_events"."created_at" >= $10) ORDER BY "public"."outbox_events"."created_at" DESC LIMIT $11 OFFSET $12 - 62ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 35ms
api:dev: [2025-11-21T22:18:46.307Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: ÔÜá´©Å [REDSYS-CONFIG] No se encontr├│ clave configurada, usando clave gen├®rica de test
api:dev: Ô£à [REDSYS-CONFIG] Clave inicializada correctamente: { keyLength: 24, testMode: true, keySource: 'GENERIC_TEST' }
api:dev: [2025-11-21T22:18:46.375Z] GET /api/admin/reservations - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:18:46.404Z] GET /api/admin/users - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:18:46.416Z] GET /api/admin/payments - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: [2025-11-21T22:18:46.420Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 30ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 61ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 35ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 35ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 36ms
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 35ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 37ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/payments
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 38ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 35ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 63ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 64ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/reservations
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/users
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 33ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 34ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 35ms
api:dev: prisma:query SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."ledger_transactions"."id", "public"."ledger_transactions"."source_type", "public"."ledger_transactions"."source_id", "public"."ledger_transactions"."amount_euro", "public"."ledger_transactions"."currency", "public"."ledger_transactions"."payment_status"::text, "public"."ledger_transactions"."paid_at", "public"."ledger_transactions"."method", "public"."ledger_transactions"."gateway_ref", "public"."ledger_transactions"."metadata" FROM "public"."ledger_transactions" WHERE ("public"."ledger_transactions"."direction" = CAST($1::text AS "public"."LedgerDirection") AND "public"."ledger_transactions"."payment_status" = CAST($2::text AS "public"."PaymentStatus")) ORDER BY "public"."ledger_transactions"."paid_at" DESC LIMIT $3 OFFSET $4 - 69ms
api:dev: [2025-11-21T22:18:46.567Z] GET /api/admin/payments - 200 (151ms)
api:dev:  GET /api/admin/payments?status=PENDING&limit=100 200 in 291ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 71ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: [2025-11-21T22:18:46.593Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT 1
api:dev: [DB-QUERY] SELECT 1 - 28ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 65ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub" - 61ms
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 62ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."payment_method" IN ($2,$3,$4) AND "public"."reservations"."created_at" < $5 AND "public"."reservations"."expires_at" > $6) ORDER BY "public"."reservations"."created_at" ASC LIMIT $7 OFFSET $8 - 66ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 36ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 98ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."phone", "public"."users"."role"::text, "public"."users"."is_active", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."last_login_at", COALESCE("aggr_selection_0_Reservation"."_aggr_count_reservations", 0) AS "_aggr_count_reservations", COALESCE("aggr_selection_1_Membership"."_aggr_count_memberships", 0) AS "_aggr_count_memberships" FROM "public"."users" LEFT JOIN (SELECT "public"."reservations"."user_id", COUNT(*) AS "_aggr_count_reservations" FROM "public"."reservations" WHERE 1=1 GROUP BY "public"."reservations"."user_id") AS "aggr_selection_0_Reservation" ON ("public"."users"."id" = "aggr_selection_0_Reservation"."user_id") LEFT JOIN (SELECT "public"."memberships"."user_id", COUNT(*) AS "_aggr_count_memberships" FROM "public"."memberships" WHERE 1=1 GROUP BY "public"."memberships"."user_id") AS "aggr_selection_1_Membership" ON ("public"."users"."id" = "aggr_selection_1_Membership"."user_id") WHERE 1=1 ORDER BY "public"."users"."created_at" DESC LIMIT $1 OFFSET $2 - 67ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 41ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'ERROR',
api:dev:   severity: 'HIGH',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:18:46.666Z] GET /api/admin/audit - 200 (73ms)
api:dev:  GET /api/admin/audit?severity=HIGH&status=ERROR&limit=100 200 in 89ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100","timestamp":"2025-11-21T22:18:46.667Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=HIGH&status=ERROR&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 74,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: [2025-11-21T22:18:46.688Z] GET /api/admin/audit - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4 - 66ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_type", "public"."outbox_events"."event_data", "public"."outbox_events"."processed", "public"."outbox_events"."processed_at", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE ("public"."outbox_events"."event_type" = $1 AND "public"."outbox_events"."processed" = $2 AND (("public"."outbox_events"."event_data"#>ARRAY[$3]::text[])::jsonb <= $4 AND JSONB_TYPEOF(("public"."outbox_events"."event_data"#>ARRAY[$5]::text[])::jsonb) = $6)) ORDER BY "public"."outbox_events"."created_at" ASC LIMIT $7 OFFSET $8 - 62ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."sport_type", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 67ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 32ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/audit
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104
api:dev: [DB-QUERY] SELECT SUM("public"."reservations"."total_price"), COUNT("public"."reservations"."id"), "public"."reservations"."user_id" FROM "public"."reservations" WHERE ("public"."reservations"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."reservations"."status" IN (CAST($101::text AS "public"."ReservationStatus"),CAST($102::text AS "public"."ReservationStatus"),CAST($103::text AS "public"."ReservationStatus"))) GROUP BY "public"."reservations"."user_id" OFFSET $104 - 69ms
api:dev: prisma:query SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102
api:dev: [DB-QUERY] SELECT COUNT("public"."memberships"."id"), "public"."memberships"."user_id" FROM "public"."memberships" WHERE ("public"."memberships"."user_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) AND "public"."memberships"."status" = $101) GROUP BY "public"."memberships"."user_id" OFFSET $102 - 73ms
api:dev: [2025-11-21T22:18:46.738Z] GET /api/admin/users - 200 (334ms)
api:dev:  GET /api/admin/users?limit=100 200 in 462ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."created_at", "public"."reservations"."payment_method", "public"."reservations"."start_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND (NOT "public"."reservations"."payment_method" IN ($2,$3,$4,$5)) AND (("public"."reservations"."payment_method" IN ($6,$7,$8,$9,$10,$11) AND "public"."reservations"."expires_at" < $12) OR ("public"."reservations"."payment_method" = $13 AND "public"."reservations"."start_time" < $14))) OFFSET $15 - 63ms
api:dev: prisma:query SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9
api:dev: [DB-QUERY] SELECT "public"."order_items"."id", "public"."order_items"."order_id", "public"."order_items"."product_id", "public"."order_items"."qty", "public"."order_items"."unit_price_euro", "public"."order_items"."tax_rate", "public"."order_items"."credits_per_unit" FROM "public"."order_items" WHERE "public"."order_items"."order_id" IN ($1,$2,$3,$4,$5,$6,$7,$8) OFFSET $9 - 71ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 71ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 41ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: AuditService.getAuditLogs called with query: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: AuditService.getAuditStats called with filters: {
api:dev:   page: 1,
api:dev:   limit: 100,
api:dev:   status: 'FAILED',
api:dev:   severity: 'CRITICAL',
api:dev:   sortBy: 'timestamp',
api:dev:   sortOrder: 'desc'
api:dev: }
api:dev: [2025-11-21T22:18:46.767Z] GET /api/admin/audit - 200 (79ms)
api:dev:  GET /api/admin/audit?severity=CRITICAL&status=FAILED&limit=100 200 in 91ms
api:dev: AuditService.createAuditLog called with data: {
api:dev:   userId: undefined,
api:dev:   userName: 'Sistema',
api:dev:   userEmail: undefined,
api:dev:   userRole: undefined,
api:dev:   action: 'VIEW_AUDIT_LOGS',
api:dev:   resource: 'audit',
api:dev:   resourceId: 'admin',
api:dev:   entityType: 'admin',
api:dev:   entityId: 'admin',
api:dev:   details: '{"method":"GET","url":"http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100","timestamp":"2025-11-21T22:18:46.768Z"}',
api:dev:   metadata: {
api:dev:     method: 'GET',
api:dev:     url: 'http://localhost:3002/api/admin/audit?severity=CRITICAL&status=FAILED&limit=100',
api:dev:     userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:     referer: 'http://localhost:3001/',
api:dev:     origin: null,
api:dev:     responseStatus: 200,
api:dev:     responseHeaders: {
api:dev:       'access-control-allow-credentials': 'true',
api:dev:       'access-control-allow-headers': 'Content-Type, Authorization, Idempotency-Key',
api:dev:       'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTIONS',
api:dev:       'content-type': 'application/json'
api:dev:     }
api:dev:   },
api:dev:   ipAddress: '::1',
api:dev:   userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
api:dev:   sessionId: undefined,
api:dev:   status: 'SUCCESS',
api:dev:   severity: 'MEDIUM',
api:dev:   category: 'DATA_ACCESS',
api:dev:   tags: [ 'audit', 'logs', 'view' ],
api:dev:   duration: 80,
api:dev:   errorCode: undefined,
api:dev:   errorMessage: undefined
api:dev: }
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 70ms
api:dev: [2025-11-21T22:18:46.778Z] GET /api/maintenance - 200 (471ms)
api:dev:  GET /api/maintenance?status=SCHEDULED&limit=100 200 in 502ms
api:dev: prisma:query BEGIN
api:dev: [DB-QUERY] BEGIN - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: [2025-11-21T22:18:46.803Z] GET /api/maintenance - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."products"."id", "public"."products"."name", "public"."products"."price_euro", "public"."products"."sku", "public"."products"."category", "public"."products"."requires_check_in" FROM "public"."products" WHERE "public"."products"."id" IN ($1) OFFSET $2 - 66ms
api:dev: [2025-11-21T22:18:46.830Z] GET /api/admin/orders - 200 (410ms)
api:dev:  GET /api/admin/orders?status=PENDING&limit=100 200 in 553ms
api:dev: [2025-11-21T22:18:46.855Z] GET /api/admin/orders - Iniciado
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus")))
api:dev: [DB-QUERY] UPDATE "public"."reservations" SET "status" = CAST($1::text AS "public"."ReservationStatus"), "updated_at" = $2 WHERE ("public"."reservations"."end_time" < $3 AND "public"."reservations"."check_in_time" IS NULL AND "public"."reservations"."status" IN (CAST($4::text AS "public"."ReservationStatus"),CAST($5::text AS "public"."ReservationStatus"))) - 64ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 64ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/maintenance
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query COMMIT
api:dev: [DB-QUERY] COMMIT - 29ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 33ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Iniciando autenticaci├â┬│n h├â┬¡brida
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Origin: null
api:dev: ├░┼©ÔÇØ┬ì [AUTH] Method: GET
api:dev: ├░┼©ÔÇØ┬ì [AUTH] URL: /api/admin/orders
api:dev: ├░┼©ÔÇØÔÇÿ [AUTH] Authorization header: Ausente
api:dev: ├░┼©┬ì┬¬ [AUTH] Intentando autenticaci├â┬│n con NextAuth (getToken)
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 66ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 29ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."email", "public"."users"."name", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."phone", "public"."users"."password", "public"."users"."firebase_uid", "public"."users"."role"::text, "public"."users"."date_of_birth", "public"."users"."membership_type", "public"."users"."membership_expires_at", "public"."users"."credits_balance", "public"."users"."is_active", "public"."users"."avatar", "public"."users"."last_login_at", "public"."users"."email_verified", "public"."users"."email_verified_at", "public"."users"."gdpr_consent", "public"."users"."gdpr_consent_date", "public"."users"."created_at", "public"."users"."updated_at", "public"."users"."referred_by", "public"."users"."referral_code" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3 - 31ms
api:dev: ├ó┼ôÔÇª [AUTH] Usuario autenticado con NextAuth (getToken): admin@polideportivo.com Rol: ADMIN
api:dev: ├░┼©┼¢ÔÇ░ [AUTH] Autenticaci├â┬│n exitosa para: admin@polideportivo.com
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."end_time" FROM "public"."reservations" WHERE ("public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") AND "public"."reservations"."end_time" < $2 AND "public"."reservations"."check_in_time" IS NOT NULL) OFFSET $3 - 62ms
api:dev: Admin reservations request params: { status: 'PENDING', limit: '100' }
api:dev: Admin reservations query where: {
api:dev:   "status": "PENDING"
api:dev: }
api:dev: Admin reservations query params: { skip: 0, limit: 100, sortBy: 'createdAt', sortOrder: 'desc' }
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."maintenance_schedules"."id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") OFFSET $2) AS "sub" - 65ms
api:dev: prisma:query SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."maintenance_schedules"."id", "public"."maintenance_schedules"."court_id", "public"."maintenance_schedules"."type"::text, "public"."maintenance_schedules"."activity_type"::text, "public"."maintenance_schedules"."activity_category", "public"."maintenance_schedules"."status"::text, "public"."maintenance_schedules"."scheduled_at", "public"."maintenance_schedules"."started_at", "public"."maintenance_schedules"."completed_at", "public"."maintenance_schedules"."description", "public"."maintenance_schedules"."notes", "public"."maintenance_schedules"."cost", "public"."maintenance_schedules"."assigned_to", "public"."maintenance_schedules"."created_at", "public"."maintenance_schedules"."updated_at", "public"."maintenance_schedules"."estimated_duration", "public"."maintenance_schedules"."series_id" FROM "public"."maintenance_schedules" WHERE "public"."maintenance_schedules"."status" = CAST($1::text AS "public"."MaintenanceStatus") ORDER BY "public"."maintenance_schedules"."scheduled_at" ASC LIMIT $2 OFFSET $3 - 68ms
api:dev: [2025-11-21T22:18:46.972Z] GET /api/maintenance - 200 (169ms)
api:dev:  GET /api/maintenance?status=IN_PROGRESS&limit=100 200 in 181ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."orders"."id" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") OFFSET $2) AS "sub" - 59ms
api:dev: prisma:query SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."orders"."id", "public"."orders"."user_id", "public"."orders"."status"::text, "public"."orders"."total_euro", "public"."orders"."credits_used", "public"."orders"."payment_method"::text, "public"."orders"."created_at" FROM "public"."orders" WHERE "public"."orders"."status" = CAST($1::text AS "public"."OrderStatus") ORDER BY "public"."orders"."created_at" DESC LIMIT $2 OFFSET $3 - 66ms
api:dev: [2025-11-21T22:18:46.993Z] GET /api/admin/orders - 200 (138ms)
api:dev:  GET /api/admin/orders?status=PAID&limit=100 200 in 151ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 34ms
api:dev: prisma:query SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."reservations"."id", "public"."reservations"."court_id", "public"."reservations"."user_id", "public"."reservations"."start_time", "public"."reservations"."end_time", "public"."reservations"."status"::text, "public"."reservations"."total_price", "public"."reservations"."payment_method", "public"."reservations"."payment_intent_id", "public"."reservations"."is_recurring", "public"."reservations"."recurring_parent_id", "public"."reservations"."check_in_time", "public"."reservations"."check_out_time", "public"."reservations"."expires_at", "public"."reservations"."notes", "public"."reservations"."created_at", "public"."reservations"."updated_at", "public"."reservations"."lighting_selected", "public"."reservations"."lighting_extra_total", "public"."reservations"."sport", "public"."reservations"."paid_at", "public"."reservations"."payment_status"::text, "public"."reservations"."credits_used", "public"."reservations"."credit_discount", "public"."reservations"."promo_code", "public"."reservations"."promo_discount" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") ORDER BY "public"."reservations"."created_at" DESC LIMIT $2 OFFSET $3 - 67ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."reservations"."id" FROM "public"."reservations" WHERE "public"."reservations"."status" = CAST($1::text AS "public"."ReservationStatus") OFFSET $2) AS "sub" - 67ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 29ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3) OFFSET $4 - 64ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 32ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3) OFFSET $4
api:dev: [DB-QUERY] SELECT "public"."courts"."id", "public"."courts"."name", "public"."courts"."center_id" FROM "public"."courts" WHERE "public"."courts"."id" IN ($1,$2,$3) OFFSET $4 - 59ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 30ms
api:dev: prisma:query SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."centers"."id", "public"."centers"."name" FROM "public"."centers" WHERE "public"."centers"."id" IN ($1) OFFSET $2 - 34ms
api:dev: Admin reservations query results: { itemsCount: 5, total: 5 }
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 38ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE "public"."notifications"."external_id" = $1 LIMIT $2 OFFSET $3 - 33ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 63ms
api:dev: prisma:query SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."notifications"."id", "public"."notifications"."user_id", "public"."notifications"."type"::text, "public"."notifications"."category", "public"."notifications"."title", "public"."notifications"."message", "public"."notifications"."priority"::text, "public"."notifications"."status"::text, "public"."notifications"."data", "public"."notifications"."action_url", "public"."notifications"."scheduled_for", "public"."notifications"."sent_at", "public"."notifications"."read_at", "public"."notifications"."external_id", "public"."notifications"."error", "public"."notifications"."created_at", "public"."notifications"."updated_at" FROM "public"."notifications" WHERE 1=1 ORDER BY "public"."notifications"."created_at" DESC LIMIT $1 OFFSET $2 - 41ms
api:dev: prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub"
api:dev: [DB-QUERY] SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."notifications"."id" FROM "public"."notifications" WHERE 1=1 OFFSET $1) AS "sub" - 64ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" = $1 ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $2 - 68ms
api:dev: prisma:query SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
api:dev: [DB-QUERY] SELECT "public"."users"."id", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8 - 36ms
api:dev: [2025-11-21T22:18:47.311Z] GET /api/notifications - 200 (2031ms)
api:dev:  GET /api/notifications?limit=10 200 in 2061ms
api:dev: prisma:query SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3
api:dev: [DB-QUERY] SELECT "public"."outbox_events"."id", "public"."outbox_events"."event_data", "public"."outbox_events"."created_at" FROM "public"."outbox_events" WHERE "public"."outbox_events"."event_type" IN ($1,$2) ORDER BY "public"."outbox_events"."created_at" DESC OFFSET $3 - 105ms
api:dev: [2025-11-21T22:18:47.419Z] GET /api/admin/reservations - 200 (1044ms)
api:dev:  GET /api/admin/reservations?status=PENDING&limit=100 200 in 1143ms
